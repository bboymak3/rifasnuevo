// Añade esta función en tu script
async function testCompra() {
    console.log('🧪 Testeando compra...');
    
    // Datos de prueba
    const testData = {
        userId: usuario.id,
        nombre: usuario.nombre,
        telefono: usuario.telefono || '',
        tickets: [1, 2, 3], // Tickets de prueba
        totalCreditos: 300
    };
    
    console.log('📤 Enviando datos de prueba:', testData);
    
    try {
        const response = await fetch('/api/comprar-tickets', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(testData)
        });
        
        console.log('📨 Respuesta recibida, status:', response.status);
        
        const data = await response.json();
        console.log('📊 Datos de respuesta:', data);
        
        if (response.ok && data.success) {
            alert('✅ Test exitoso! La API funciona correctamente.');
            console.log('Créditos restantes:', data.creditosRestantes);
        } else {
            alert('❌ Error en test: ' + data.error);
        }
        
    } catch (error) {
        console.error('💥 Error en test:', error);
        alert('❌ Error de conexión en test: ' + error.message);
    }
}

// Añade un botón de test en tu HTML (temporalmente)
function agregarBotonTest() {
    const testBtn = document.createElement('button');
    testBtn.textContent = '🧪 Test API Compra';
    testBtn.style.cssText = 'position:fixed; top:10px; right:10px; z-index:9999; background:#ff9800; color:white; border:none; padding:10px; border-radius:5px; cursor:pointer;';
    testBtn.onclick = testCompra;
    document.body.appendChild(testBtn);
}

// Llama a esta función después de cargar el contenido
agregarBotonTest();