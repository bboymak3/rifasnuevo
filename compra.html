<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Confirmar Compra - Rifa Moto 0KM</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .resumen-ticket { background: #f8f9fa; border-radius: 10px; padding: 20px; }
    .ticket-badge { background: #28a745; color: white; padding: 8px 12px; border-radius: 5px; display: inline-block; margin: 5px; font-weight: bold; }
    .metodo-pago { border: 2px solid #e9ecef; border-radius: 10px; padding: 15px; margin: 10px 0; cursor: pointer; transition: all 0.3s; }
    .metodo-pago:hover { border-color: #007bff; }
    .metodo-pago.selected { border-color: #007bff; background: #f8f9ff; }
    .info-pago { display: none; margin-top: 15px; padding: 15px; background: #f8f9fa; border-radius: 5px; }
  </style>
</head>
<body class="bg-light">
  <nav class="navbar navbar-dark bg-primary">
    <div class="container">
      <span class="navbar-brand">🏍️ Confirmar Compra</span>
      <a href="/" class="btn btn-outline-light btn-sm">← Volver</a>
    </div>
  </nav>

  <div class="container mt-4">
    <div class="row">
      <div class="col-md-8">
        <div class="card">
          <div class="card-header">
            <h4 class="mb-0">👤 Información Personal</h4>
          </div>
          <div class="card-body">
            <form id="formCompra">
              <div class="row">
                <div class="col-md-6">
                  <div class="mb-3">
                    <label class="form-label">Nombre completo *</label>
                    <input type="text" class="form-control" id="nombre" required>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="mb-3">
                    <label class="form-label">Teléfono *</label>
                    <input type="tel" class="form-control" id="telefono" required>
                  </div>
                </div>
              </div>
              <div class="mb-3">
                <label class="form-label">Email (opcional)</label>
                <input type="email" class="form-control" id="email">
              </div>

              <h5 class="mt-4">💳 Método de Pago *</h5>
              
              <div class="metodo-pago" onclick="seleccionarMetodo('transferencia')">
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="metodoPago" id="transferencia" value="transferencia">
                  <label class="form-check-label fw-bold" for="transferencia">
                    🏦 Transferencia Bancaria
                  </label>
                </div>
                <div class="info-pago" id="infoTransferencia">
                  <div class="alert alert-info">
                    <strong>Datos para transferencia:</strong><br>
                    Banco: Banesco<br>
                    Cuenta: 0134-1234-5678<br>
                    Titular: Juan Pérez<br>
                    <strong>Enviar comprobante a:</strong> WhatsApp 0412-1234567
                  </div>
                  <div class="mb-3">
                    <label class="form-label">Número de comprobante *</label>
                    <input type="text" class="form-control" id="comprobanteTransferencia" placeholder="Ej: T-123456">
                  </div>
                </div>
              </div>

              <div class="metodo-pago" onclick="seleccionarMetodo('pago_movil')">
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="metodoPago" id="pagoMovil" value="pago_movil">
                  <label class="form-check-label fw-bold" for="pagoMovil">
                    📱 Pago Móvil
                  </label>
                </div>
                <div class="info-pago" id="infoPagoMovil">
                  <div class="alert alert-info">
                    <strong>Datos para Pago Móvil:</strong><br>
                    Teléfono: 0412-121212<br>
                    Nombre: Juan Carlos<br>
                    Banco: Banco de Venezuela
                  </div>
                  <div class="mb-3">
                    <label class="form-label">Número de referencia *</label>
                    <input type="text" class="form-control" id="comprobantePagoMovil" placeholder="Ej: REF-123456">
                  </div>
                </div>
              </div>

              <div class="mt-4">
                <button type="submit" class="btn btn-success btn-lg w-100">
                  ✅ Confirmar y Procesar Pago
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>

      <div class="col-md-4">
        <div class="resumen-ticket">
          <h5>📋 Resumen de Compra</h5>
          <div class="mb-3">
            <strong>Tickets seleccionados:</strong>
            <div id="resumenTickets" class="mt-2"></div>
          </div>
          <div class="mb-2">
            <strong>Cantidad:</strong> <span id="resumenCantidad">0</span> tickets
          </div>
          <div class="mb-2">
            <strong>Precio unitario:</strong> Bs. 499.00
          </div>
          <div class="mb-3">
            <strong>Total a pagar:</strong> 
            <h4 class="text-success">Bs. <span id="resumenTotal">0.00</span></h4>
          </div>
        </div>

        <div class="alert alert-warning mt-3">
          <small>
            ⚠️ <strong>Importante:</strong><br>
            • Tu compra se confirmará cuando verifiquemos el pago<br>
            • Guarda tu comprobante<br>
            • Los tickets quedarán reservados por 24 horas
          </small>
        </div>
      </div>
    </div>
  </div>

  <script>
    function seleccionarMetodo(metodo) {
      // Ocultar todos los info-pago primero
      document.querySelectorAll('.info-pago').forEach(function(element) {
        element.style.display = 'none';
      });
      
      // Remover la clase selected de todos los métodos
      document.querySelectorAll('.metodo-pago').forEach(function(element) {
        element.classList.remove('selected');
      });
      
      // Marcar el radio button correspondiente
      document.getElementById(metodo).checked = true;
      
      // Mostrar el info-pago del método seleccionado
      document.getElementById('info' + metodo.charAt(0).toUpperCase() + metodo.slice(1)).style.display = 'block';
      
      // Agregar clase selected al método seleccionado
      event.currentTarget.classList.add('selected');
    }
  </script>

  <script src="/js/compra.js"></script>
</body>
</html>